# 为什么要限流
* 限流可以认为服务降级的一种，限流就是限制系统的输入和输出流量已达到保护系统 的目的。
* 一般来说系统的吞吐量是可以被测算的，为了保证系统的稳定运行，一旦达 到的需要限制的阈值，就需要限制流量并采取一些措施以完成限制流量的目的。比 如：延迟处理，拒绝处理，或者部分拒绝处理等等
#计数器
#滑动窗口
* 一分钟分成若干等分(6份,每份10秒), 在每一份上设置独立计数器,在 00:00-00:09 之间发生请求计数器累加1.当等分数量越大限流统计就越详细
#Leaky Bucket 漏桶
* 规定固定容量的桶, 有水进入, 有水流出. 对于流进的水我们无法估计进来的数量、速度, 对于流出的水我们可以控制速度
#Token Bucket 令牌桶
* 规定固定容量的桶, token 以固定速度往桶内填充, 当桶满时 token 不会被继续放入, 每过来一个请求把 token 从桶中移除, 如果桶中没有 token 不能请求
#spring-cloud-gateway
* spring cloud gateway 默认使用redis进行限流, 进行配置
#sentinel
* Sentinel 支持多样化的流量整形策略，在 QPS 过高的时候可以自动将流量调整成合适的形状。
   * 直接拒绝模式：即超出的请求直接拒绝。
   * 慢启动预热模式：当流量激增的时候，控制流量通过的速率，让通过的流量缓慢增加，在
    一定时间内逐渐增加到阈值上限，给冷系统一个预热的时间，避免冷系统被压垮。
   * 匀速器模式：利用 Leaky Bucket 算法实现的匀速模式，严格控制了请求通过的时间间隔，
    同时堆积的请求将会排队，超过超时时长的请求直接被拒绝。
* Sentinel 还支持基于调用关系的限流，包括基于调用方限流、基于调用链入口限流、关联流量限流等，依托于 Sentinel强大的调用链路统计信息，可以提供精准的不同维度的限流。
  


