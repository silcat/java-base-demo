# 问题与挑战
* 大型网站都是读多写少。读写分离可以支撑更高的读并发压力了。主库写，从库读
#读写分离实现
* 读写分离基于mysql主从同步
* 写从主库，读从从库
#产生的问题
* mysql主从复制延迟同步，导致数据不一致
# 解决方案
* mysql主从同步解决方案
* 如果确实是存在必须先插入，立马要求就查询到，对这个查询设置直连主库。
* 分库，将一个主库拆分为多个主库，每个主库的写并发就减少了几倍，此时主从延迟可以忽略不计。
* 重写代码，写代码的同学，要慎重，插入数据时立马查询可能查不到。
    * 本地标记法：针对前端请求
    ````
    A发起写请求，更新了主库在客户端设置标记，过期时间，如：cookies
    后端处理读请求看是否有标记，有标记读主库，无标记读从库
    ````
   * 缓存标记法：新写数据设置缓存（redis），过期时间为主从同步时间，缺点依赖redis