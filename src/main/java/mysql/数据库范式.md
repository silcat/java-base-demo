
#定义
* 元组 ： 元组（tuple）是关系数据库中的基本概念，关系是一张表，表中的每行（即数据库中的每条记录）就是一个元组，每列就是一个属性。 在二维表里，元组也称为行。
* 码 ：码就是能唯一标识实体的属性，对应表中的列。
* 候选码 ： 若关系中的某一属性或属性组的值能唯一的标识一个元组，而其任何、子集都不能再标识，则称该属性组为候选码。例如：在学生实体中，“学号”是能唯一的区分学生实体的，同时又假设“姓名”、“班级”的属性组合足以区分学生实体，那么{学号}和{姓名，班级}都是候选码。
* 主码 : 主码也叫主键。主码是从候选码中选出来的。 一个实体集中只能有一个主码，但可以有多个候选码。
* 外码 : 外码也叫外键。如果一个关系中的一个属性是另外一个关系中的主码则这个属性为外码。
* 主属性 ： 候选码中出现过的属性称为主属性。比如关系 工人（工号，身份证号，姓名，性别，部门）. 显然工号和身份证号都能够唯一标示这个关系，所以都是候选码。工号、身份证号这两个属性就是主属性。如果主码是一个属性组，那么属性组中的属性都是主属性。
* 非主属性： 不包含在任何一个候选码中的属性称为非主属性。比如在关系——学生（学号，姓名，年龄，性别，班级）中，主码是“学号”，那么其他的“姓名”、“年龄”、“性别”、“班级”就都可以称为非主属性
#第三范式
## 第一范式
 * 1NF的定义为：符合1NF的关系中的每个属性都不可再分
````
学号 姓名 课名 分数 系 系主任
````
## 第二范式
 * 2NF的定义为：2NF在1NF的基础之上，消除了非主属性对于码的部分函数依赖
 * 码:(学号，课名) 学号，姓名即为表的主属性
````
学号，课名，分数
学号，姓名，系名，系主任
````
## 第三范式
 * 3NF的定义为：3NF在2NF的基础之上，消除了非主属性对于码的传递函数依赖
 * 传递函数:主码为学号，主属性为学号，非主属性为姓名、系名和系主任。因为 学号 → 系名，同时 系名 → 系主任，所以存在非主属性系主任对于码学号的传递函数依赖，所以学生表的设计，不符合3NF的要求。。
````
学生（学号，课名，分数）
选课（学号，姓名，系名）
系（系名，系主任）
````
## 符合3NF要求的数据库设计，基本上解决了数据冗余过大，插入异常，修改异常，删除异常的问题。
#BCNF范式
##第三范式问题
 * 在某些特殊情况下，即使关系模式符合 3NF 的要求，仍然存在着插入异常，修改异常与删除异常的问题，仍然不是 ”好“ 的设计。
 * 码：（管理员，物品名），（仓库名，物品名）
 * 主属性：仓库名、管理员、物品名
 * 非主属性：数量
 * 存在问题：主属性【仓库名】对于码【（管理员，物品名）】的部分函数依赖
````
 仓库（仓库名，管理员，物品名，数量） 
````
## 解决
 * 3NF 的基础上消除主属性对于码的部分与传递函数依赖
````
 仓库（仓库名，管理员）
 库存（仓库名，物品名，数量）
````
#数据库设计通常分为哪几步?
* 需求分析 : 分析用户的需求，包括数据、功能和性能需求。
* 概念结构设计 : 主要采用 E-R 模型进行设计，包括画 E-R 图。
* 逻辑结构设计 : 通过将 E-R 图转换成表，实现从 E-R 模型到关系模型的转换。
* 物理结构设计 : 主要是为所设计的数据库选择合适的存储结构和存取路径。
* 数据库实施 : 包括编程、测试和试运行
* 数据库的运行和维护 : 系统的运行与数据库的日常维护。
#设计建议
* 尽量控制单表数据量的大小，建议控制在 500 万以内
* 如果数据库中有存储 emoji 表情的需要，字符集需要采用 utf8mb4 字符集。
* 经常一起使用的列放到一个表中
* 禁止在表中建立预留字段
* 禁止在表中建立预留字段
* 对于非负型的数据 (如自增 ID,整型 IP，年龄) 来说,要优先使用无符号整型来存储
* 小数值类型（比如年龄、状态表示如 0/1）优先使用 TINYINT 类型
* 避免使用 TEXT,BLOB 数据类型，避免使用 TEXT,BLOB 数据类型
* 尽可能把所有列定义为 NOT NULL
* 使用 TIMESTAMP(4 个字节) 或 DATETIME 类型 (8 个字节) 存储时间
* 同财务相关的金额类数据必须使用 decimal 类型
* 每张表上的索引数量,建议单张表索引不超过 5 个
* 禁止使用 SELECT * 
* 禁止使用不含字段列表的 INSERT 语句
* 避免使用子查询，可以把子查询优化为 join 操作
* WHERE 从句中禁止对列进行函数转换和计算
* 超 100 万行的批量写 (UPDATE,DELETE,INSERT) 操作,要分批多次进行操作